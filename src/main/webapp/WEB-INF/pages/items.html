<!DOCTYPE html>
<html>
<head>
	<meta charset="windows-1255">
	<title>Todo List</title>
	<link rel="icon" 
      type="image/png" 
      href="pages/images/todolist-icon.png">
      
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	
	<!-- Compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	    
	<!-- Custom styles for this template -->          
	<link href="pages/style.css" rel="stylesheet">
</head>
<body>

		<script>
			var itemsStrArray = [];
			var index = 0;
			$.get("/items",function(data,status){
				itemsStrArray = data.split("-");
				
				renderData1();
				renderData2();
				renderData3();
				
				var i;
				var pagesCount = itemsStrArray.length/3;
				if(itemsStrArray.length%3 != 0 && itemsStrArray.length>3){
					pagesCount++;
				}
				var numberListElement = document.getElementById("pageNumsList");
				for(i=2;i<pagesCount;i++){
					var node = document.createElement("LI");
					node.setAttribute("id","page"+i);
					var nodeClick = document.createElement("A");
					nodeClick.innerHTML = i;
					node.appendChild(nodeClick);
					numberListElement.appendChild(node);
				}
				
				var node = document.createElement("LI");
				node.setAttribute("class","waves-effect");
				var nodeClick = document.createElement("a");
				nodeClick.setAttribute("href","javascript:nextPage()")
				var nodeIco = document.createElement("I");
				nodeIco.setAttribute("class","material-icons");
				nodeIco.innerHTML = "chevron_right";
				nodeClick.appendChild(nodeIco);
				node.appendChild(nodeClick); 
				numberListElement.appendChild(node);
			});
			
			function renderPageNumber(pageNum){
				
			}
			
			function renderData1(){
				if(index < itemsStrArray.length){
					var itemStr = itemsStrArray[index];
					if(itemStr != ""){
						var itemArray = itemStr.split(",");
						var id = itemArray[0];
						var title = itemArray[1];
						var content = itemArray[2];
						var status = itemArray[3];

						document.getElementById("item1").style.display = "block";
						document.getElementById("title1").innerHTML = title;
						document.getElementById("content1").innerHTML = content;
						document.getElementById("status1").innerHTML = status;
						document.getElementById("itemId1").value = id;
						index++;
					}
				} else{
					document.getElementById("item1").style.display = "none";
				}
			}
			
			function renderData2(){
				if(index < itemsStrArray.length){
					var itemStr = itemsStrArray[index];
					if(itemStr != ""){
						var itemArray = itemStr.split(",");
						var id = itemArray[0];
						var title = itemArray[1];
						var content = itemArray[2];
						var status = itemArray[3];
						
						document.getElementById("item2").style.display = "block";
						document.getElementById("title2").innerHTML = title;
						document.getElementById("content2").innerHTML = content;
						document.getElementById("status2").innerHTML = status;
						document.getElementById("itemId2").value = id;
						index++;
					}
				} else{
					document.getElementById("item2").style.display = "none";
				}
			}
			function renderData3(){
				if(index < itemsStrArray.length){
					var itemStr = itemsStrArray[index];
					if(itemStr != ""){
						var itemArray = itemStr.split(",");
						var id = itemArray[0];
						var title = itemArray[1];
						var content = itemArray[2];
						var status = itemArray[3];
						
						document.getElementById("item3").style.display = "block";
						document.getElementById("title3").innerHTML = title;
						document.getElementById("content3").innerHTML = content;
						document.getElementById("status3").innerHTML = status;
						document.getElementById("itemId3").value = id;
						index++;
					}
				} else{
					document.getElementById("item3").style.display = "none";
				}
			}
			
			function nextPage(){
				if(index < itemsStrArray.length){
					$('#page'+(index/3)).removeClass("active");	
					$('#page'+((index+3)/3)).addClass("active");	
					renderData1();
					renderData2();
					renderData3();
				}
			}
			
			function prevPage(){
				if(index > 2){
					if(index%3 == 0){
						index -= 6;
					}else if(index%3 == 2){
						index -= 5;
					}else if(index%3 == 1){
						index -= 4;
					}
					
					renderData1();
					renderData2();
					renderData3();
					
					$('#page'+((index+3)/3)).removeClass("active");			
					$('#page'+index/3).addClass("active");
				}
			}
		</script>
		
		<div class="colored-background-section">
            <div class="color-wrapper">
            	<img class="responsive-img" src="pages/images/todolist-icon.png" />
                <h3 class="summery-text"><b>ToDo List Website</b></h3>
            </div>
    	</div>

		<div class="container small-container" style="margin-bottom: 50px">
		
			<ul class="collection">
	    		<li class="collection-item" style="display:none" id="item1">
	      			<h4 class="title" id="title1">Title</h4>
	      			<h6 id="content1">First Line </h6>
	      			<form action="deleteItem" method="post">
	      				<input type="hidden" id="itemId1" name="itemId"/>
	      				  <button class="btn waves-effect waves-light secondary-content" type="submit">
	    					<i class="material-icons">delete</i>
	  					  </button>
	         		</form>
	         		<p id="status1" style="font-style: oblique;">Second Line</p>
	    		</li>
			
				<li class="collection-item" style="display:none" id="item2">
	      			<h4 class="title" id="title2">Title</h4>
	      			<h6 id="content2">First Line </h6>
					<form action="deleteItem" method="post">
	      				<input type="hidden" id="itemId2" name="itemId"/>
	      				  <button class="btn waves-effect waves-light secondary-content" type="submit">
	    					<i class="material-icons">delete</i>
	  					  </button>
	         		</form>	         	
	         		<p id="status2" style="font-style: oblique;">Second Line</p>
	    		</li>
	    		
	    		<li class="collection-item" style="display:none" id=item3>
	      			<h4 class="title" id="title3">Title</h4>
	      			<h6 id="content3">First Line </h6>
	      			<form action="deleteItem" method="post">
	      				<input type="hidden" id="itemId3" name="itemId"/>
	      				  <button class="btn waves-effect waves-light secondary-content" type="submit">
	    					<i class="material-icons">delete</i>
	  					  </button>
	         		</form>
	         		<p id="status3" style="font-style: oblique;">Second Line</p>
	    		</li>
    		</ul>
    		
    	
    	
	    	 <ul class="pagination" style="text-align: center" id="pageNumsList">
	    		<li><a href="javascript:prevPage()"><i class="material-icons">chevron_left</i></a></li>
	    		<li class="active" id="page1"><a>1</a></li>
	  		</ul>

		</div>

		<div class="container medium-container">
			<div class="horizontal card">
				<div class="card-image">
        			<img src="pages/images/todo-item.png" style="width: 275px;height: 365px;margin:20px">
      			</div>
      			<div class="card-stacked">
		            <div class="card-content">
		              <span class="card-title">Add Item</span>
		              
						 <div class="row">
						    <form action="/addItem" method="post" class="col s12">
						      <div class="row">
						        <div class="input-field col s12">
						          <input name="title" placeholder="Title" type="text">
						        </div>
						      </div>
						      
						       <div class="row">
						        <div class="input-field col s12">
						          <input name="content" placeholder="Content" type="text">
						        </div>
						      </div>
						      
						      <div class="row">
							    <select name="status" class="browser-default">
							      <option value="ready" selected>Ready</option>
							      <option value="inProgress">In Progress</option>
							      <option value="done">Done</option>
							    </select>
							  </div>
											      
							  <button class="btn waves-effect waves-light" type="submit">ADD
		    					<i class="material-icons right">send</i>
		  					  </button>
						    </form>
						  </div>
				  		</div>
				  	</div>
			 </div>
		</div>
</body>
</html>